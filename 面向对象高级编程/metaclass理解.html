<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
        .auto-style1 {
            color: rgb(255, 0, 0);
            font-size: large;
        }
        .auto-style2 {
            background-color: #000066;
        }
    </style>
</head>
<body>

    <h1 id="articleHeader0" style="box-sizing: border-box; font-size: 2.25em; margin: 0px; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">理解python的metaclass(元类)</h1>
    <h2 id="articleHeader1" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">前言</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这篇博客是我在stack overflow上看了一个提问回复后写的,例子基本用的都是e-satis本人的例子，语言组织也基本按照翻译来。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        但我并不是一个翻译者,并不会严格遵守每行每句的翻译;<br style="box-sizing: border-box;" />
        有时候我会将表述换个顺序,省略一些我认为无关紧要的话，以便读者更好理解。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        所以，如果你不喜欢我的语言表述，或者想要看英文原文，可以<a href="http://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python" style="box-sizing: border-box; background: transparent; color: rgb(0, 154, 97); text-decoration: none; outline: 0px; border-bottom: 1px solid rgba(0, 154, 97, 0.25); padding-bottom: 1px;" target="_blank">点击此链接</a>去查看原回复。</p>
    <h2 id="articleHeader2" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">类也是对象</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        在理解metaclass之前，我们先要掌握python中的类(class)是什么。<br style="box-sizing: border-box;" />
        python中类的概念，是借鉴自smalltalk语言。<br style="box-sizing: border-box;" />
        在大部分语言中，类指的是&quot;描述如何产生一个对象(object)&quot;的一段代码,这对于python也是如此。</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;&gt; </span><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">ObjectCreator</span><span class="hljs-params" style="box-sizing: border-box;">(object)</span>:</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">... </span>      <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">pass</span>
...
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;&gt; </span>my_object = ObjectCreator()
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;&gt; </span>print(my_object)
&lt;__main__.ObjectCreator object at <span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">0x8974f2c</span>&gt;
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        但是,在python中,类远不止如此，类同时也是对象。<br style="box-sizing: border-box;" />
        当你遇到关键词class的时候，python就会自动执行产生一个对象。下面的代码段中:</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;&gt; </span><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">ObjectCreator</span><span class="hljs-params" style="box-sizing: border-box;">(object)</span>:</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">... </span>      <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">pass</span>
...
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        python在内存中产生了一个名叫做&quot;ObjectCreator&quot;的对象。这个对象(类)自身拥有产生对象(实例instance)的能力。 这就是为什么称呼这东西(后面遇到容易混淆的地方,我们称之为:类对象)也是类的原因。同时，它也是一个对象，因此你可以对它做如下操作:</p>
    <ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                赋值给变量</p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                复制它</p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                为它增加属性(attribute)</p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                作为参数传值给函数</p>
        </li>
    </ul>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        举例：</p>
    <pre class="hljs ruby" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(ObjectCreator) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 你可以打印一个类,因为它同时也是对象</span>
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">ObjectCreator</span>&#39;&gt;</span>

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">echo</span><span class="hljs-params" style="box-sizing: border-box;">(o)</span></span>:
...     print(o)
...
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; echo(ObjectCreator) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 作为参数传值给函数</span>
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">ObjectCreator</span>&#39;&gt;</span>

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(hasattr(ObjectCreator, <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;new_attribute&#39;</span>))
False
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; ObjectCreator.new_attribute = <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;foo&#39;</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># you can add attributes to a class</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(hasattr(ObjectCreator, <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;new_attribute&#39;</span>))
True
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(ObjectCreator.new_attribute)
foo

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; ObjectCreatorMirror = ObjectCreator <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 将类赋值给变量</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(ObjectCreatorMirror.new_attribute)
foo
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(ObjectCreatorMirror())
&lt;__main_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>.ObjectCreator object at <span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">0x8997b4c</span>&gt;
</code></pre>
    <h2 id="articleHeader3" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">动态创建类</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        既然类也是对象，那么我们就可以在运行的时候创建它，跟创建对象一样自然。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        首先，我们使用<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">class</code>关键字定义一个产生类的函数:</p>
    <pre class="hljs ruby" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">choose_class</span><span class="hljs-params" style="box-sizing: border-box;">(name)</span></span>:
...     if name == <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;foo&#39;</span>:
...         <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Foo</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">object</span>):</span>
...             pass
...         <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> Foo <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># return the class, not an instance</span>
...     <span class="hljs-symbol" style="box-sizing: border-box; color: rgb(153, 0, 115);">else:</span>
...         <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Bar</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">object</span>):</span>
...             pass
...         <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> Bar
...
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; MyClass = choose_class(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;foo&#39;</span>)
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(MyClass) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># the function returns a class, not an instance</span>
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Foo</span>&#39;&gt;</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(MyClass()) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># you can create an object from this class</span>
&lt;__main_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>.Foo object at <span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">0x89c6d4c</span>&gt;
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这很容易理解吧。但是，这并不那么动态啊。我们还是需要自己来写这个类的代码。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        既然类也是对象，那就应该有用来产生它的东西。这东西就是type。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        先来说说你所认识的type。这个古老而好用的函数，可以让我们知道一个对象的类型是什么。</p>
    <pre class="hljs moonscript" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">&gt;&gt;&gt; <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">print</span>(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>(<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>))
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;int&#39;</span>&gt;
&gt;&gt;&gt; <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">print</span>(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&quot;1&quot;</span>))
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">print</span>(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>(ObjectCreator))
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;type&#39;</span>&gt;
&gt;&gt;&gt; <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">print</span>(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>(ObjectCreator()))
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">ObjectCreator</span>&#39;&gt;</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        实际上，type还有一个完全不同的功能，它可以在运行时产生类。type可以传入一些参数，然后返回一个类。(好吧，必须承认，根据不同的传入参数，一个相同的函数<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>居然会有两个完全不同的作用，这很愚蠢。不过python这样做是为了保持向后兼容性。)</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        下面举例type创建类的用法。首先，对于类一般是这么定义的:</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;&gt; </span><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">MyShinyClass</span><span class="hljs-params" style="box-sizing: border-box;">(object)</span>:</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">... </span>      <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">pass</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        在下面，MyShinyClass也可以这样子被创建出来,并且跟上面的创建方法有一样的表现:</p>
    <pre class="hljs ruby" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; MyShinyClass = type(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;MyShinyClass&#39;</span>, (), {}) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># returns a class object</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(MyShinyClass)
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">MyShinyClass</span>&#39;&gt;</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; print(MyShinyClass()) <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># create an instance with the class</span>
&lt;__main_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>.MyShinyClass object at <span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">0x8997cec</span>&gt;
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        type创建类需要传入三个参数,分别为:</p>
    <ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                类的名字</p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                一组&quot;类的父类&quot;的元组(tuple) (这个会实现继承,也可以为空)</p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                字典 (类的属性名与值,key-value的形式，不传相当于为空，如一般写法中的pass).</p>
        </li>
    </ul>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        下面来点复杂的，来更好的理解type传入的三个参数:</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Foo</span><span class="hljs-params" style="box-sizing: border-box;">(object)</span>:</span>
    bar = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">True</span>

    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">echo_bar</span><span class="hljs-params" style="box-sizing: border-box;">(self)</span>:</span>
        print(self.bar)
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        等价于:</p>
    <pre class="hljs ruby" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">echo_bar</span><span class="hljs-params" style="box-sizing: border-box;">(<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">self</span>)</span></span>:
    print(<span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">self</span>.bar)

Foo = type(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;Foo&#39;</span>, (), {<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;bar&#39;</span><span class="hljs-symbol" style="box-sizing: border-box; color: rgb(153, 0, 115);">:True</span>, <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;echo_bar&#39;</span>: echo_bar})
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        想要看点有继承关系的类的实现,来:</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">FooChild</span><span class="hljs-params" style="box-sizing: border-box;">(Foo)</span>:</span>
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">pass</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        等价于:</p>
    <pre class="hljs elm" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">FooChild</span> = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">type</span>(&#39;<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">FooChild</span>&#39;, (<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Foo</span>, ), {})
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        回顾一下我们学到哪了: 在python中，类就是对象，并且你可以在运行的时候动态创建类.</p>
    <h2 id="articleHeader4" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">那到底什么是metaclass(元类)</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        metaclass 就是创建类的那家伙。(事实上,type就是一个metaclass)</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        我们知道,我们定义了class就是为了能够创建object的，没错吧?</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        我们也学习了，python中类也是对象。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        那么，metaclass就是用来创造“类对象”的类.它是“类对象”的“类”。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        可以这样子来理解:</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <span class="img-wrap" style="box-sizing: border-box;">
        <img data-src="/img/remote/1460000007255415?w=600&amp;h=219" src="https://segmentfault.com/img/remote/1460000007255415?w=600&amp;h=219" style="box-sizing: border-box; border: 1px solid rgb(221, 221, 221); vertical-align: middle; max-width: 100%; position: static !important; padding: 3px; cursor: pointer; display: inline;" /></span></p>
    <pre class="hljs ini" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-attr" style="box-sizing: border-box;">MyClass</span> = MetaClass()
<span class="hljs-attr" style="box-sizing: border-box;">MyObject</span> = MyClass()
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        也可以用我们上面学到的<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>来表示:</p>
    <pre class="hljs elm" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">MyClass</span> = <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">type</span>(&#39;<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">MyClass</span>&#39;, (), {})
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        说白了,函数<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>就是一个特殊的metaclass.<br style="box-sizing: border-box;" />
        python在背后使用<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>创造了所有的类。<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>是所有类的metaclass.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        我们可以使用<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__class__</code>属性来验证这个说法.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        在python中，一切皆为对象：整数、字符串、函数、类.所有这些对象，都是通过类来创造的.</p>
    <pre class="hljs ruby" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; age = <span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">35</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; age.__class_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>
&lt;type <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;int&#39;</span>&gt;

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; name = <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;bob&#39;</span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; name.__class_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>
&lt;type <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;str&#39;</span>&gt;

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">foo</span><span class="hljs-params" style="box-sizing: border-box;">()</span></span>: pass
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; foo.__class_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>
&lt;type <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;function&#39;</span>&gt;

<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Bar</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">object</span>): <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">pass</span></span>
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; b = Bar()
<span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;">&gt;&gt;</span>&gt; b.__class_<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>
&lt;<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> &#39;<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">__main__</span>.<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Bar</span>&#39;&gt;</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        那么，<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__class__</code>的<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__class__</code>又是什么呢?</p>
    <pre class="hljs sqf" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">&gt;&gt;&gt; age.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;type&#39;</span>&gt;
&gt;&gt;&gt; <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;type&#39;</span>&gt;
&gt;&gt;&gt; foo.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;type&#39;</span>&gt;
&gt;&gt;&gt; b.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__class__</span>
&lt;<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span> <span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;type&#39;</span>&gt;
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        metaclass就是创造类对象的工具.如果你喜欢，你也可以称之为&quot;类的工厂&quot;.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        type是python內置的metaclass。不过，你也可以编写自己的metaclass.</p>
    <h2 id="articleHeader5" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code><span>&nbsp;</span>属性</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        我们可以在一个类中加入<span>&nbsp;</span><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code><span>&nbsp;</span>属性.</p>
    <pre class="hljs clean" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> Foo(object):
    __metaclass__ = something...
    [...]
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        当你这么做了，python就会使用metaclass来创造类:Foo。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        注意啦，这里有些技巧的。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        当你写下<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">class Foo(object)</code>的时候，类对象Foo还没有在内存中生成。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        python会在类定义中寻找<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code><span>&nbsp;</span>。如果找到了，python就会使用这个<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code><span>&nbsp;</span>来创造类对象: Foo。如果没找到，python就使用type来创造Foo。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        请把下面的几段话重复几遍：</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        当你写如下代码的时候:</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Foo</span><span class="hljs-params" style="box-sizing: border-box;">(Bar)</span>:</span>
    <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">pass</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        python做了以下事情:</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        Foo中有<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>这个属性吗？<br style="box-sizing: border-box;" />
        如果有，python会在内存中通过<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>创建一个名字为Foo的类对象。<br style="box-sizing: border-box;" />
        如果python没有在Foo中找到<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>，它会继续在Bar（父类）中寻找<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>，并尝试做和前面同样的操作。<br style="box-sizing: border-box;" />
        如果python由下往上遍历父类也都没有找不到<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>，它就会在模块(module)中去寻找<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>，并尝试做同样的操作。<br style="box-sizing: border-box;" />
        如果还是没有找不到<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>， python才会用内置的type(这也是一个metaclass)来创建这个类对象。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        现在问题来了,我们要怎么用代码来实现<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>呢? 写一些可以用来产生类(class)的东西就行。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        那什么可以产生类？无疑就是<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>，或者<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>的任何子类,或者任何使用到<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type</code>的东西都行.</p>
    <h2 id="articleHeader6" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">自定义metaclass</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        使用metaclass的主要目的，是为了能够在创建类的时候，自动地修改类。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        一个很傻的需求，我们决定要将该模块中的所有类的属性，改为大写。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        有几种方法可以做到，这里使用<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>来实现.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        在模块的层次定义metaclass,模块中的所有类都会使用它来创造类。我们只需要告诉metaclass,将所有的属性转化为大写。</p>
    <pre class="hljs python" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># type也是一个类，我们可以继承它.</span>
<span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">UpperAttrMetaclass</span><span class="hljs-params" style="box-sizing: border-box;">(type)</span>:</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># __new__ 是在__init__之前被调用的特殊方法</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># __new__是用来创建对象并返回这个对象</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 而__init__只是将传入的参数初始化给对象</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 实际中,你很少会用到__new__，除非你希望能够控制对象的创建</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 在这里，类是我们要创建的对象，我们希望能够自定义它，所以我们改写了__new__</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 如果你希望的话，你也可以在__init__中做些事情</span>
    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(153, 153, 136); font-style: normal;"># 还有一些高级的用法会涉及到改写__call__，但这里我们就先不这样.</span>

    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">__new__</span><span class="hljs-params" style="box-sizing: border-box;">(upperattr_metaclass, future_class_name,
                future_class_parents, future_class_attr)</span>:</span>

        uppercase_attr = {}
        <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> name, val <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">in</span> future_class_attr.items():
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">if</span> <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">not</span> name.startswith(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;__&#39;</span>):
                uppercase_attr[name.upper()] = val
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">else</span>:
                uppercase_attr[name] = val
        <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> type(future_class_name, future_class_parents, uppercase_attr)
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这里的方式其实不是OOP(面向对象编程).因为我们直接调用了type,而不是改写父类的<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__type__</code>方法.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        所以我们也可以这样子处理:</p>
    <pre class="hljs sqf" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">class UpperAttrMetaclass(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>):

    def <span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__new__</span>(upperattr_metaclass, future_class_name,
                future_class_parents, future_class_attr):

        uppercase_attr = {}
        <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>, val <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">in</span> future_class_attr.<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">items</span>():
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">if</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">not</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>.startswith(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;__&#39;</span>):
                uppercase_attr[<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>.upper()] = val
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">else</span>:
                uppercase_attr[<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>] = val
        return <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>.<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__new__</span>(upperattr_metaclass, future_class_name,
                            future_class_parents, uppercase_attr)
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这样子看,我们只是复用了<span>&nbsp;</span><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">type.__new__</code>方法,这就是我们熟悉的基本的OOP编程，没什么魔法可言.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        你可能注意到,<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__new__</code>方法相比于</p>
    <pre class="hljs ceylon" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">type(future<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span><span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_n</span>ame, future<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span><span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_p</span>arents, future<span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span><span class="hljs-number" style="box-sizing: border-box; color: rgb(0, 128, 128);">_</span>attr)
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        多了一个参数: upperattr_metaclass, 请别在意,这没什么特别的:<span>&nbsp;</span><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__new__</code>总是将&quot;它要定义的类&quot;作为第一个参数。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这就好比是 self 在类的一般方法(method)中一样,也是被作为第一个参数传入。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        当然啦，这里的名字的确是我起的太长了。就像self一样，所有的参数都有它们传统的名称。<br style="box-sizing: border-box;" />
        因此，在实际的代码中,一个metaclass应该是写成下面样子的:</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        (我们同时使用常见的super来让代码更清晰)</p>
    <pre class="hljs sqf" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">class UpperAttrMetaclass(<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">type</span>):

    def <span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__new__</span>(cls, clsname, bases, attrs):
        uppercase_attr = {}
        <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>, val <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">in</span> attrs.<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">items</span>():
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">if</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">not</span> <span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>.startswith(<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;__&#39;</span>):
                uppercase_attr[<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>.upper()] = val
            <span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">else</span>:
                uppercase_attr[<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">name</span>] = val
        return super(UpperAttrMetaclass, cls).<span class="hljs-variable" style="box-sizing: border-box; color: rgb(0, 128, 128);">__new__</span>(cls, clsname, bases, attrs)
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        使用了 metaclass 的代码是比较复杂，但我们使用它的原因并不是为了复杂, 而是因为我们通常会使用 metaclass 去做一些晦涩的事情,比如, 依赖于自省，控制继承等等。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        确实，用 metaclass 来搞些“黑魔法”是特别有用的，因而会复杂化代码。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        但就metaclass本身而言，它们其实是很简单的：中断类的默认创建、修改类、最后返回修改后的类.</p>
    <h2 id="articleHeader7" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">到底为什么要使用metaclass</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        现在我们面临一个问题: 为什么要使用metaclass? 它容易出错且晦涩难懂.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        好吧，一般来说，我们根本就用不上它, 99%的用户应该根本不必为此操心。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        实际用到metaclass的人，很清楚他们到底需要做什么,根本不用解释为什么要用.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        metaclass 的一个主要用途就是构建API。Django(一个python实现的web框架)的ORM 就是一个例子。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        用Django先定义了以下Model:</p>
    <pre class="hljs haskell" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;"><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">class</span> <span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Person</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">models</span>.<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">Model</span>):
    name = models.<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">CharField</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">max_length</span>=30)
    age = models.<span class="hljs-type" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">IntegerField</span>()
</span></code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        然后执行下面代码:</p>
    <pre class="hljs arduino" style="box-sizing: border-box; overflow: auto; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; display: block; padding: 1em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; line-height: 1.45; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); background: url(&quot;../img/blueprint.png&quot;) 0% 0% / 30px rgb(246, 246, 246),  0% 0% / 30px; border: none; border-radius: 4px; max-height: 35em; position: relative; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; padding: 0px; color: inherit; background: none; border-radius: 0px; white-space: inherit; overflow-wrap: normal;">guy = Person.objects.<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">get</span>(name=<span class="hljs-string" style="box-sizing: border-box; color: rgb(221, 17, 68);">&#39;bob&#39;</span>)
<span class="hljs-built_in" style="box-sizing: border-box; color: rgb(0, 134, 179);">print</span> guy.age  <span class="hljs-meta" style="box-sizing: border-box; color: rgb(153, 153, 153); font-weight: bold;"># result is 35</span>
</code></pre>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这里打印的输出并不是<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">IntegerField</code>，而是一个<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">int</code>，<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">int</code>是从数据库中获取的.</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        这是因为<span>&nbsp;</span><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">models.Model</code><span>&nbsp;</span>使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 0.93em; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">__metaclass__</code>来实现了复杂的数据库查询。但对于你看来,这就是简单的API而已,不用关心背后的复杂工作。</p>
    <h2 id="articleHeader8" style="box-sizing: border-box; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.2; color: rgb(51, 51, 51); margin: 1.5em 0px 0px; font-size: 1.75em; border-bottom: 1px solid rgb(238, 238, 238); padding-bottom: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">结语</h2>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        复习一下,我们知道了,类是能够创造对象实例的对象，同时也是metaclass的对象实例(因为metaclass创造了它们).</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        在python中，一切皆为对象。它们要么是类的实例，要么是metaclass的实例, 除了type。</p>
    <p style="box-sizing: border-box; margin: 1.5em 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        type是它自身的metaclass。至于是怎么实现的，总之纯python语言是不可能实现的,这需要在实现层面上耍一些小手段才能做到的。</p>
    <p class="auto-style1" style="box-sizing: border-box; margin: 1.5em 0px; font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <strong><span class="auto-style2">metaclass用起来比较复杂, 如果需要对非常简单的类进行修改, 你可能不会使用它。有以下两个技术可以供你选择:</span></strong></p>
    <ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                <a href="https://en.wikipedia.org/wiki/Monkey_patch" style="box-sizing: border-box; background: transparent; color: rgb(0, 154, 97); text-decoration: none; outline: 0px; border-bottom: 1px solid rgba(0, 154, 97, 0.25); padding-bottom: 1px;" target="_blank">猴子修补 Monkey patch</a></p>
        </li>
        <li style="box-sizing: border-box; margin: 0.3em 0px;">
            <p style="box-sizing: border-box; margin: 0px;">
                类修饰器</p>
        </li>
    </ul>

</body>
</html>